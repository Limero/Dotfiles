map S $zsh
map <bs> set hidden!
set incsearch
set previewer ~/.config/lf/scope.sh
set wrapscroll
set period 1

set number
set relativenumber

map gy cd ~/youtube
map gd cd ~/Downloads
map gw cd "~/Games/world-of-warcraft-classic/drive_c/Program Files (x86)/World of Warcraft/_classic_/Interface/AddOns"

cmap <up> cmd-history-prev
cmap <down> cmd-history-next

cmd open ${{
    case $(file --mime-type "$f" -b) in
        text/*) IFS=':'; $EDITOR $fx;;
        application/json) IFS=':'; $EDITOR $fx;;
        audio/*) IFS=':'; mpv $fx > /dev/null 2> /dev/null;;
        image/*) IFS=':'; mpv $fx > /dev/null 2> /dev/null;;
        video/*) IFS=':'; mpv $fx > /dev/null 2> /dev/null;;
        *) IFS=':'; for f in $fx; do xdg-open "$f" > /dev/null 2> /dev/null & done;;
    esac
}}

map <enter> open
map D delete

cmd touch %touch $1 && lf -remote "send $id load" && lf -remote "send $id select $1"
cmd mkdir %mkdir -p $1 && lf -remote "send $id load" && lf -remote "send $id select $1"

# extract file with unp
cmd unp ${{
    set -f
    unp -U "$f"
    # possible to select the content?
}}

# compress current file or selected files with zip
cmd zip ${{
    set -f
    # TODO: Remove pwd from $fx
    # TODO: Set name to first entry in $fx
    zip -r $f.zip $fx
}}

cmd fzf ${{
    fzf --bind "enter:execute(vim {})+abort"
}}
